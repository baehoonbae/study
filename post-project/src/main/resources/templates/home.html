<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="/css/style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <title>게시판</title>

</head>
<body>
<div class="button-container">
    <div class="left-buttons">

    </div>
    <div id="topButtons" class="right-buttons">
        <!-- 로그아웃 상태 -->
        <th:block th:unless="${isLoggedIn}">
            <a th:href="@{/post/join}" class="custom-link">회원 가입</a>
        </th:block>
        <th:block th:unless="${isLoggedIn}">
            <button onclick="location.href='/login'">로그인</button>
        </th:block>

        <!-- 로그인 상태 -->
        <th:block>

        </th:block>
        <th:block th:if="${isLoggedIn}">
            <button onclick="location.href='/logout'">로그아웃</button>
        </th:block>
    </div>
</div>
<div>
    <br/>
    <nav>훈 배</nav>
    <div class="button-container">
        <div class="left-buttons">
            <button onclick="location.href='/'">전체 글</button>
        </div>
        <div class="right-buttons">
            <button onclick="location.href='/post/write'">글 쓰기</button>
        </div>
    </div>
    <br/>
    <div>
        <table border="1" align="center">
            <thead align="center">
            <tr>
                <th width="120">번호</th>
                <th width="700">제목</th>
                <th width="100">글쓴이</th>
                <th width="200">최근 수정일</th>
                <th width="100">조회수</th>
            </tr>
            </thead>
            <tbody align="center">
            <tr th:each="post: ${posts}">
                <td th:text="${post.id}"></td>
                <td style="text-align: left;"><a th:href="@{/post/{id}(id=${post.id})}" th:text="${post.title}" class="custom-link"></a></td>
                <td th:text="${post.writer}"></td>
                <td th:text="${post.updateDate}"></td>
                <td th:text="${post.views}"></td>
            </tr>
            </tbody>
        </table>
        <div class="button-container">
            <div class="left-buttons">
                <button onclick="location.href='/'">전체 글</button>
            </div>
            <div class="right-buttons">
                <button onclick="location.href='/post/write'">글 쓰기</button>
            </div>
        </div>
    </div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
    $(document).ready(function() {
        $('.custom-link').click(function() {
            $(this).addClass('clicked');
        });
    });

<!--    function createPost() {-->
<!--        if (!isLoggedIn) {-->
<!--            alert("권한이 없습니다.")-->
<!--        } else {-->
<!--            location.href='/post/write'-->
<!--        }-->
<!--    }-->
</script>

</body>
</html>